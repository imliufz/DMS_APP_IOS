<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="static/css/animate.min.css" media="all" />
<script type="text/javascript" src="js/html_head.js"></script>
<title>展厅接待编辑</title>
</head>
<body id="onlinebooking" onselectstart="return true;" ondragstart="return false;">
<script type="text/javascript" src="js/detail_head.js?_menu_name=展厅接待编辑" id="detail_head_js"></script>
		<div class="masklayer" ontouchmove="return true;" onClick="$(this).toggleClass('on');">
			<script>
				var isAndroid = navigator.userAgent.toLowerCase().indexOf("android");
				document.write(isAndroid > -1 ? "<img src='static/img/instruction_android.png' alt='' style='width: auto!important;'>" : "<img src='static/img/instruction_iphone.png' alt='' style='width: auto!important;'>");
			</script>
		</div>

		<div id="_showLoading"></div>
		
	<form method="post" id="fm">
		<div class="cardexplain" id="_showContentDiv1">
			<ul class="round">
				<li>展厅接待&nbsp;&nbsp;>>&nbsp;&nbsp;编辑</li>
			</ul>

			<ul class="round">
				<li class="title mb">
					<span class="none">基本信息</span>
				</li>
				<li class="nob">
					<input name="formhash" id="formhash" value="2be3071a" type="hidden">
					<input id="ITEM_ID" name="ITEM_ID" type="hidden" />
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								客户姓名<font color="red">*</font>
							</th>
							<td>
								<input id="CUSTOMER_NAME" name="CUSTOMER_NAME" class="px" placeholder="请输入客户姓名" type="text" required="required" style="display:inline;width:70%;">
								<input id="customerChooseBtn" type="button" value="选择" style="display:inline;width:20%;" />
							</td>
						</tr>
					</table>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								客户性别<font color="red">*</font>
							</th>
							<td>
								<li class="nob">
									<select id="GENDER" name="GENDER" class="download dropdown-select" required="required">
										<option value="">-请选择-</option>
									</select>
								</li>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								手机号码<font color="red" id="CONTACTOR_MOBILE_MUST">*</font>
							</th>
							<td>
								<input type="tel" name="CONTACTOR_MOBILE" id="CONTACTOR_MOBILE" class="px" placeholder="请输入手机号码" required="required" style="border: none;" readonly="readonly">
							</td>
						</tr>
					</table>
				</li>
				<li class="title mb">
					<span class="none">意向信息</span>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								意向级别<font color="red">*</font>
							</th>
							<td>
								<select name="INTENT_LEVEL" id="INTENT_LEVEL" class="download dropdown-select">
									<option value="">-请选择-</option>
									<option value="13101001">H级</option>
									<option value="13101002">A级</option>
									<option value="13101003">B级</option>
									<option value="13101004">C级</option>
									<option value="13101005">N级</option>
									<option value="13101008">O级</option>
								</select>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>意向车系<font color="red">*</font></th>
							<td>
								<select name="intentSeries" id="intentSeries" class="download dropdown-select" required="required" onChange="_changeSMPC(this.value, 1)">
									<option value="">-请选择-</option>
								</select>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								意向车型
							</th>
							<td>
								<select name="intentModel" id="intentModel" class="download dropdown-select" onChange="_changeSMPC(this.value, 2)">
								</select>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								意向配置
							</th>
							<td>
								<select name="intentPackage" id="intentPackage" class="download dropdown-select" onChange="_changeSMPC(this.value, 3)">
								</select>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								意向颜色
							</th>
							<td>
								<select name="color" id="color" class="download dropdown-select">
								</select>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								初次报价
							</th>
							<td>
								<input name="QUOTED_AMOUNT" class="px" id="QUOTED_AMOUNT" value="" placeholder="请输入初次报价" type="number" min="0" >
							</td>
						</tr>
					</table>
				</li>
				<li class="title mb">
					<span class="none">其它信息</span>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								来访方式<font color="red">*</font>
							</th>
							<td>
								<li class="nob">
									<select id="VISIT_TYPE" name="VISIT_TYPE" class="download dropdown-select" onChange="visitTypeChange(this.value);">
										<option value="">-请选择-</option>
									</select>
								</li>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" id="VISIT_DATE_LI">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>来访日期&nbsp;</th>
							<td>&nbsp;
								<label id="VISIT_DATE"></label>
								<input type="hidden" name="VISIT_DATE" id="VISIT_DATE_INPUT" />
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" id="VISIT_TIME_LI">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								来访时间<font color="red">*</font>
							</th>
							<td>
								<input name="VISIT_TIME" id="VISIT_TIME" class="px" type="time" required="required" placeholder="来访时间" onBlur="visitAndLeaveTimeCheck('VISIT_TIME', 'LEAVE_TIME', this);" />
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" id="LEAVE_TIME_LI" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								离店时间<font color="red">*</font>
							</th>
							<td>
								<input name="LEAVE_TIME" id="LEAVE_TIME" class="px" type="time" required="required" placeholder="离店时间" onBlur="visitAndLeaveTimeCheck('VISIT_TIME', 'LEAVE_TIME', this);" />
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" id="VISITOR_LI">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								来访人数<font color="red">*</font>
							</th>
							<td>
								<input id="VISITOR" name="VISITOR" class="px" value="" required="required" placeholder="请输入来访人数" type="number" min="1">
							</td>
						</tr>
					</table>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								客户来源<font color="red">*</font>
							</th>
							<td>
								<li class="nob">
									<select id="CUS_SOURCE" name="CUS_SOURCE" class="download dropdown-select" required="required" exceptValue="13111016">
										<option value="">-请选择-</option>
									</select>
								</li>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								了解途径<font color="red">*</font>
							</th>
							<td>
								<li class="nob">
									<select id="MEDIA_TYPE" name="MEDIA_TYPE" class="download dropdown-select" required="required" onChange="knowWayChange(this.value);">
										<option value="">-请选择-</option>
										<option value="12981001">报纸</option>
										<option value="12981002">杂志</option>
										<option value="12981003">电视</option>
										<option value="12981004">电台</option>
										<option value="12981005">网络</option>
										<option value="12981006">车展</option>
										<option value="12981007">活动</option>
										<option value="12981008">保有客户</option>
										<option value="12981009">朋友介绍</option>
										<option value="12981010">路过</option>
										<option value="12981011">户外</option>
										<option value="12981012">老客户推荐</option>
										<option value="12981013">邀约</option>
										<option value="12981014">DM</option>
										<option value="12981015">其他</option>
										<option value="12981016">店招吸引</option>
										<option value="12981017">短信</option>
									</select>
								</li>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" id="MEDIA_DETAIL_LI">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								渠道细分<font color="red">*</font>
							</th>
							<td>
								<li class="nob">
									<select id="MEDIA_DETAIL" name="MEDIA_DETAIL" class="download dropdown-select">
										<option value="">-请选择-</option>
										<option value="12982001">汽车之家</option>
										<option value="12982002">易车网</option>
										<option value="12982003">太平洋</option>
										<option value="12982004">爱卡</option>
										<option value="12982005">新浪</option>
										<option value="12982006">搜狐</option>
										<option value="12982007">腾讯</option>
										<option value="12982008">网易</option>
										<option value="12982009">百度</option>
										<option value="12982010">阿里</option>
										<option value="12982011">其他</option>
									</select>
								</li>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" name="tjr" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								推荐人<font color="red">*</font>
							</th>
							<td>
								<li class="nob">
									<input type="text" id="REFEREE_NAME" name="REFEREE_NAME" class="px" placeholder="请选择推荐人" readonly="readonly" style="display:inline;width:70%;">
									<input id="refereeChooseBtn" type="button" value="选择" style="display:inline;width:20%;" />
								</li>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" name="tjr" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								推荐人电话<font color="red">*</font>
							</th>
							<td>
								<li class="nob">
									<input type="text" id="REFEREE_MOBILE" name="REFEREE_MOBILE" class="px" readonly="readonly">
								</li>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>活动选择&nbsp;</th>
							<td>
								<input name="CAMPAIGN_CODE" class="px" id="CAMPAIGN_CODE" type="hidden">
								<input name="CAMPAIGN_NAME" class="px" id="CAMPAIGN_NAME" type="text" readonly="readonly" style="display:inline;width:70%;">
								<input id="activityChooseBtn" type="button" value="选择" style="display:inline;width:20%;" />
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" id="MK_CAMPAIGN_TYPE_L1_LI" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								投放渠道类型<font color="red">*</font>
							</th>
							<td>
								<li class="nob">
									<select id="MK_CAMPAIGN_TYPE_L1" name="MK_CAMPAIGN_TYPE_L1" class="download dropdown-select" onchange='createChannelName(this.value)'>
										<option value="">-请选择-</option>
									</select>
								</li>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" id="MK_CAMPAIGN_TYPE_NAME_LI" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								投放渠道名称<font color="red">*</font>
							</th>
							<td>
								<li class="nob">
									<select id="MK_CAMPAIGN_TYPE_NAME" name="MK_CAMPAIGN_TYPE_NAME" class="download dropdown-select">
										<option value="">-请选择-</option>
									</select>
								</li>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								是否二网客流<font color="red">*</font>
							</th>
							<td>
								<li class="nob">
									<select id="IS_SECOND_LEVEL" name="IS_SECOND_LEVEL" class="download dropdown-select" required="required">
										<option value="">-请选择-</option>
									</select>
								</li>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" id="IS_TEST_DRIVE_LI">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								是否试乘试驾<font color="red">*</font>
							</th>
							<td>
								<li class="nob">
									<select id="IS_TEST_DRIVE" name="IS_TEST_DRIVE" class="download dropdown-select" onChange="isTestDriveChange(this.value)">
										<option value="">-请选择-</option>
									</select>
								</li>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" name="scsj" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>试乘试驾时间&nbsp;</th>
							<td>&nbsp;
								<label id="TEST_DRIVE_DATE"></label>
								<input type="hidden" name="TEST_DRIVE_TIME" id="TEST_DRIVE_TIME" />
							</td>
						</tr>
					</table>
				</li>

				<li class="title mb" name="scsj" style="display: none;">
					<span class="none">试乘试驾信息<font color="red">(试乘和试驾必须二选一或全选)</font></span>
				</li>
				<li class="nob" name="scsj" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>是否试乘&nbsp;</th>
							<td>
								<select id="IS_TEST" name="IS_TEST" class="download dropdown-select" onChange="isTestChange(this.value);">
									<option value="">-请选择-</option>
								</select>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" name="scsj" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>是否试驾&nbsp;</th>
							<td>
								<select id="IS_DRIVE" name="IS_DRIVE" class="download dropdown-select" onChange="isDriveChange(this.value);">
									<option value="">-请选择-</option>
								</select>
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" name="scsj" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								VIN<font color="red">*</font>
							</th>
							<td>
								<input name="VIN" class="px" id="VIN" value="" placeholder="请输入VIN" type="text" onKeyDown="return false;" style="display:inline;width:70%;" />
								<input id="vinChooseBtn" type="button" value="选择" style="display:inline;width:20%;" />
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" name="scsj" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								身份证号<font color="red" id="IDENTITY_NUMBER_MUST" style="display: none">*</font>
							</th>
							<td>
								<input id="IDENTITY_NUMBER" name="IDENTITY_NUMBER" class="px" value="" placeholder="请输入身份证号" type="text" pattern="^[1-9]{1}[0-9]{14}$|^[1-9]{1}[0-9]{16}([0-9]|[xX])$" />
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" name="scsj" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								驾驶证号<font color="red" id="DRIVER_LICENSE_MUST" style="display: none">*</font>
							</th>
							<td>
								<input id="DRIVER_LICENSE" name="DRIVER_LICENSE" class="px" value="" placeholder="请输入驾驶证号" type="text" />
							</td>
						</tr>
					</table>
				</li>
				<li class="nob" name="scsj" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>是否满意&nbsp;</th>
							<td>
								<select id="IS_SATISFIED" name="IS_SATISFIED" class="download dropdown-select">
									<option value="">-请选择-</option>
								</select>
							</td>
						</tr>
					</table>
				</li>
				<!-- 
				<li class="nob" name="scsj" style="display: none;">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>是否首次&nbsp;</th>
							<td>
								<select id="IS_FIRST_VISIT" name="IS_FIRST_VISIT" class="download dropdown-select">
									<option value="">-请选择-</option>
								</select>
							</td>
						</tr>
					</table>
				</li>
				 -->
			</ul>

			<div class="footReturn">
				<input id="submitBtn" value="提   交" type="submit" class="submit" style="width: 100%" onClick="validateForm();">
				<br /> <br /> <br /> <br />
				<div class="window" id="windowcenter">
					<div id="title" class="wtitle">
						操作提示<span class="close" id="alertclose"></span>
					</div>
					<div class="content">
						<div id="txt"></div>
					</div>
				</div>
			</div>
		</div>
	</form>	
		
		<div class="cardexplain" id="_showContentDiv2" style="display: none;">
			<ul class="round">
				<li>展厅接待&nbsp;&nbsp;>>&nbsp;&nbsp;选择潜在客户</li>
			</ul>
			<ul class="round">
				<li class="title mb"><span class="none">查询条件栏</span></li>
						<li class="nob">
					<form id="_showContentDiv2_form" method="post">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								<li class="nob">
									<input type="text" id="namePhone" name="namePhone" placeholder="客户姓名/手机号码" class="px" required="required" />
								</li>
							</td>
						</tr>
						<tr class="biaoge">
							<td>
								<li class="nob">
									<select id="salesConsultant" name="salesConsultant" class="download dropdown-select">
										<option value="">销售顾问</option>
									</select>
								</li>
							</td>
						</tr>
						<tr class="biaoge">
							<td align="center">
								<li class="nob">
									<input value="查   询" type="submit" class="submit" style="display:inline;width:30%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<input value="返   回" type="button" class="submit" style="display:inline;width:30%;" onClick="backLastLevel();">
								</li>
							</td>
						</tr>
					</table>
					</form>
				</li>
			</ul>
			
			<div class="footReturn">
			</div>
		    <ul class="round">
				<li class="title mb"><span class="none">客户信息</span></li>
		        <table class="bordered">
		            <thead>
		            <tr class="biaoge">
		                <th align="center" width="25%">客户姓名</th>
		                <th align="center" width="25%">客户手机</th>
		            	<th align="center" width="25%">意向级别</th> 
		                <th align="center" width="25%">销售顾问</th>
		            </tr>
		            </thead>
		            <tbody id="tableBody">
		            </tbody>
		        </table>
		    </ul>
		</div>
		
		
		<div class="cardexplain" id="_showContentDiv3" style="display: none;">
			<ul class="round">
				<li>展厅接待&nbsp;&nbsp;>>&nbsp;&nbsp;选择保有客户</li>
			</ul>
			<ul class="round">
				<li class="title mb"><span class="none">查询条件栏</span></li>
						<li class="nob">
					<form id="_showContentDiv3_form" method="post">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								<li class="nob">
									<input type="text" id="retainNamePhone" name="retainNamePhone" placeholder="客户姓名/手机号码" class="px" required="required" />
								</li>
							</td>
						</tr>
						<tr class="biaoge">
							<td align="center">
								<li class="nob">
									<input value="查   询" type="submit" class="submit" style="display:inline;width:30%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<input value="返   回" type="button" class="submit" style="display:inline;width:30%;" onClick="backLastLevel();">
								</li>
							</td>
						</tr>
					</table>
					</form>
				</li>
			</ul>
			
			<div class="footReturn">
			</div>
		    <ul class="round">
				<li class="title mb"><span class="none">客户信息</span></li>
		        <table class="bordered">
		            <thead>
		            <tr class="biaoge">
		                <th align="center" width="50%">客户姓名</th>
		                <th align="center" width="50%">客户手机</th>
		            </tr>
		            </thead>
		            <tbody id="retainCusTableBody">
		            </tbody>
		        </table>
		    </ul>
		</div>
		
				
		<div class="cardexplain" id="_showContentDiv4" style="display: none;">
			<ul class="round">
				<li>展厅接待&nbsp;&nbsp;>>&nbsp;&nbsp;选择活动</li>
			</ul>
			<ul class="round">
				<li class="title mb"><span class="none">查询条件栏</span></li>
						<li class="nob">
					<form id="_showContentDiv4_form" onSubmit="queryActivityData();return false;" method="post">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								<li class="nob">
									<input type="text" id="activityCode" name="activityCode" value="" placeholder="活动代码" class="px" />
								</li>
							</td>
						</tr>
						<tr class="biaoge">
							<td>
								<li class="nob">
									<input type="text" id="activityName" name="activityName" value="" placeholder="活动名称" class="px" />
								</li>
							</td>
						</tr>
						<tr class="biaoge">
							<td>
								<li class="nob">
									<select id="ACTIVE_TYPE" name="ACTIVE_TYPE" class="download dropdown-select" style="width: 96%" required="required">
										<option value="">活动分类</option>
									</select>
									<font color="red">*</font>
								</li>
							</td>
						</tr>
						<tr class="biaoge">
							<td align="center">
								<li class="nob">
									<input value="查   询" type="submit" class="submit" style="display:inline;width:30%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<input value="返   回" type="button" class="submit" style="display:inline;width:30%;" onClick="backLastLevel();">
								</li>
							</td>
						</tr>
					</table>
					</form>
				</li>
			</ul>
			
			<div class="footReturn">
			</div>
		    <ul class="round">
				<li class="title mb"><span class="none">活动信息</span></li>
		        <table class="bordered">
		            <thead id="activityTableHead">
		            </thead>
		            <tbody id="activityTableBody">
		            </tbody>
		        </table>
		    </ul>
		</div>
		
		
		<div class="cardexplain" id="_showContentDiv5" style="display: none;">
			<ul class="round">
				<li>展厅接待&nbsp;&nbsp;>>&nbsp;&nbsp;选择试乘试驾车辆</li>
			</ul>
			<ul class="round">
				<li class="title mb"><span class="none">查询条件栏</span></li>
						<li class="nob">
					<table class="kuang" border="0" cellpadding="0" cellspacing="0" width="100%">
						<tr class="biaoge">
							<td>
								<li class="nob">
									<select name="seriesQuery" id="seriesQuery" class="download dropdown-select" onChange="_changeSMPCDynamic('modelQuery', 'packageQuery', 'colorQuery', this.value, 1)">
										<option value="">车系</option>
									</select>
								</li>
							</td>
						</tr>
						<tr class="biaoge">
							<td>
								<li class="nob">
									<select name="modelQuery" id="modelQuery" class="download dropdown-select" onChange="_changeSMPCDynamic('modelQuery', 'packageQuery', 'colorQuery', this.value, 2)">
										<option value="">车型</option>
									</select>
								</li>
							</td>
						</tr>
						<tr class="biaoge">
							<td>
								<li class="nob">
									<select name="packageQuery" id="packageQuery" class="download dropdown-select" onChange="_changeSMPCDynamic('modelQuery', 'packageQuery', 'colorQuery', this.value, 3)">
										<option value="">配置</option>
									</select>
								</li>
							</td>
						</tr>
						<tr class="biaoge">
							<td>
								<li class="nob">
									<select name="colorQuery" id="colorQuery" class="download dropdown-select">
										<option value="">颜色</option>
									</select>
								</li>
							</td>
						</tr>
						<tr class="biaoge">
							<td>
								<li class="nob">
									<input type="text" id="vinQuery" name="vinQuery" placeholder="请输入VIN进行查询" class="px" />
								</li>
							</td>
						</tr>
						<tr class="biaoge">
							<td align="center">
								<li class="nob">
									<input id="vinSubmitBtn" value="查   询" type="button" class="submit" style="display:inline;width:30%;" onClick="queryVinData();">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<input value="返   回" type="button" class="submit" style="display:inline;width:30%;" onClick="backLastLevel();">
								</li>
							</td>
						</tr>
					</table>
				</li>
			</ul>
			
			<div class="footReturn">
			</div>
		    <ul class="round">
				<li class="title mb"><span class="none">试乘试驾车辆信息</span></li>
		        <table class="bordered">
		            <thead>
		            <tr class="biaoge">
		                <th align="center">车型</th>
		                <th align="center">颜色</th>
		                <th align="center">VIN</th>
		            </tr>
		            </thead>
		            <tbody id="vinTableBody">
		            </tbody>
		        </table>
		    </ul>
		</div>
		
	
		<div class="top_bar footer_bar">
			<section>
				<div class="nav_10">
					<ul class="box">
						<li id="backBtn">
							<a href="javascript:void(0)" onClick="_toBack();">
	                            <p class="back2"></p>
	                            <span>返回</span>
	                        </a>
						</li>
						<li>
							<a href="javascript:void(0)" onClick="_mainPage();">
	                            <p class="home"></p>
	                            <span>首页</span>
	                        </a>
						</li>
					</ul>
				</div>
			</section>
		</div>
</body>

<script type="text/javascript">

	function _loadData() {
		var id = UrlParm.parm("id");
		var url = httpUrlHead + "HallReceptionService/loadHallReceptionInfo.json?id=" + id + "&" + httpUrlEnd;
		makeFormCall(
				url,
				function(json) {
					if (json.RESULT.maps != null && json.RESULT.maps.length > 0) {
						var map = json.RESULT.maps[0];
						document.getElementById("ITEM_ID").value = map.ITEM_ID;
						document.getElementById("CUSTOMER_NAME").value = map.CUSTOMER_NAME;
						document.getElementById("CONTACTOR_MOBILE").value = map.CONTACTOR_MOBILE;
						document.getElementById("QUOTED_AMOUNT").value = map.QUOTED_AMOUNT;
						document.getElementById("VISITOR").value = map.VISITOR;

						var visitTimeDate = new Date(map.VISIT_TIME);
						var leaveTimeDate = new Date(map.LEAVE_TIME);
					//	document.getElementById("VISIT_DATE").innerHTML = visitTimeDate.getFullYear()+"-"+(visitTimeDate.getMonth()+1)+"-"+visitTimeDate.getDate();
					//	document.getElementById("VISIT_DATE_INPUT").value = visitTimeDate.getFullYear()+"-"+(visitTimeDate.getMonth()+1)+"-"+visitTimeDate.getDate();
					//	document.getElementById('VISIT_TIME').valueAsDate = new Date(visitTimeDate.getFullYear(), visitTimeDate.getMonth(), visitTimeDate.getDate(), (visitTimeDate.getHours()+8)%24, visitTimeDate.getMinutes());
					//	document.getElementById('LEAVE_TIME').valueAsDate = new Date(leaveTimeDate.getFullYear(), leaveTimeDate.getMonth(), leaveTimeDate.getDate(), (leaveTimeDate.getHours()+8)%24, leaveTimeDate.getMinutes());
						document.getElementById("VISIT_DATE").innerHTML = map.VISIT_DATE;
						document.getElementById("VISIT_DATE_INPUT").value = map.VISIT_DATE;
						document.getElementById('VISIT_TIME').defaultValue = map.VISIT_DATE_TIME;
						document.getElementById('LEAVE_TIME').defaultValue = map.LEAVE_DATE_TIME;
						document.getElementById("GENDER").setAttribute("defaultValue", map.GENDER);
						document.getElementById("INTENT_LEVEL").value = map.INTENT_LEVEL;
						document.getElementById("VISIT_TYPE").setAttribute("defaultValue", map.VISIT_TYPE);
						document.getElementById("CUS_SOURCE").setAttribute("defaultValue", map.CUS_SOURCE);
						document.getElementById("MEDIA_TYPE").value = map.MEDIA_TYPE;
						document.getElementById("MEDIA_DETAIL").value = map.MEDIA_DETAIL;
						document.getElementById("REFEREE_NAME").value = map.REFEREE_NAME;
						document.getElementById("REFEREE_MOBILE").value = map.REFEREE_MOBILE;
						document.getElementById("CAMPAIGN_CODE").value = map.CAMPAIGN_CODE;
						document.getElementById("CAMPAIGN_NAME").value = map.CAMPAIGN_NAME;
						document.getElementById("IS_SECOND_LEVEL").setAttribute("defaultValue", map.IS_SECOND_LEVEL);
						
						document.getElementById("IS_TEST_DRIVE").setAttribute("defaultValue", map.IS_TEST_DRIVE);
						
					//	if(map.TEST_DRIVE_TIME != null) {
					//		var testDriveTimeDate = new Date(map.TEST_DRIVE_TIME);
					//		document.getElementById("TEST_DRIVE_DATE").innerHTML = testDriveTimeDate.getFullYear()+"-"+(testDriveTimeDate.getMonth()+1)+"-"+testDriveTimeDate.getDate();
					//		document.getElementById("TEST_DRIVE_TIME").value = testDriveTimeDate.getFullYear()+"-"+(testDriveTimeDate.getMonth()+1)+"-"+testDriveTimeDate.getDate();
					//	} else {
					//		document.getElementById("TEST_DRIVE_DATE").innerHTML = visitTimeDate.getFullYear()+"-"+(visitTimeDate.getMonth()+1)+"-"+visitTimeDate.getDate();
					//		document.getElementById("TEST_DRIVE_TIME").value = visitTimeDate.getFullYear()+"-"+(visitTimeDate.getMonth()+1)+"-"+visitTimeDate.getDate();
					//	}
						document.getElementById("TEST_DRIVE_DATE").innerHTML = map.VISIT_DATE;
						document.getElementById("TEST_DRIVE_TIME").value = map.VISIT_DATE;
					
						document.getElementById("IS_TEST").setAttribute("defaultValue", map.IS_TEST);
						document.getElementById("IS_DRIVE").setAttribute("defaultValue", map.IS_DRIVE);
						document.getElementById("VIN").value = map.VIN;
						document.getElementById("IDENTITY_NUMBER").value = map.IDENTITY_NUMBER;
						document.getElementById("DRIVER_LICENSE").value = map.DRIVER_LICENSE;
						document.getElementById("IS_SATISFIED").setAttribute("defaultValue", map.IS_SATISFIED);
					//	document.getElementById("IS_FIRST_VISIT").setAttribute("defaultValue", map.IS_FIRST_VISIT);
						
						document.getElementById("intentSeries").setAttribute("defaultValue", map.INTENT_SERIES_MAIN);
						document.getElementById("intentModel").setAttribute("defaultValue", map.INTENT_MODEL_MAIN);
						_changeSMPC(map.INTENT_SERIES_MAIN, "1");
						
						document.getElementById("intentPackage").setAttribute("defaultValue", map.INTENT_CONFIG_MAIN);
						_changeSMPC(map.INTENT_MODEL_MAIN, "2");
						
						document.getElementById("color").setAttribute("defaultValue", map.COLOR_NAME_MAIN);
						_changeSMPC(map.INTENT_CONFIG_MAIN, "3");
						
						if(map.MK_CAMPAIGN_TYPE_L1 != null && map.MK_CAMPAIGN_TYPE_L1 != '0') {
							$('#MK_CAMPAIGN_TYPE_L1').attr("defaultValue", map.MK_CAMPAIGN_TYPE_L1);
							$('#MK_CAMPAIGN_TYPE_NAME').attr("defaultValue", map.MK_CAMPAIGN_TYPE_NAME);
							$('#MK_CAMPAIGN_TYPE_L1').attr("required", true);
							$('#MK_CAMPAIGN_TYPE_NAME').attr("required", true);
							$('#MK_CAMPAIGN_TYPE_L1_LI').show();
							$('#MK_CAMPAIGN_TYPE_NAME_LI').show();
						} else if(map.MK_CAMPAIGN_TYPE_L1 == null || map.MK_CAMPAIGN_TYPE_L1 == '0') {
							$('#MK_CAMPAIGN_TYPE_L1').val('');
							$('#MK_CAMPAIGN_TYPE_NAME').val('');
							$('#MK_CAMPAIGN_TYPE_L1').attr("required", false);
							$('#MK_CAMPAIGN_TYPE_NAME').attr("required", false);
							$('#MK_CAMPAIGN_TYPE_L1_LI').hide();
							$('#MK_CAMPAIGN_TYPE_NAME_LI').hide();
						}
						
						visitTypeChange(map.VISIT_TYPE);
						knowWayChange(map.KNOW_WAY);
						initTestDriveChange(map.IS_TEST_DRIVE);
						isTestChange(map.IS_TEST);
						isDriveChange(map.IS_DRIVE);
						_loadSeries("intentSeries");
						//加载tc_code
						_loadTcCode("1003", "1309", "1311", "1004", "1004", "1004", "1004", "1004", "1004", "6690", "6691", "1305", "GENDER", "VISIT_TYPE", "CUS_SOURCE", "IS_TEST_DRIVE", "IS_SECOND_LEVEL", "IS_TEST", "IS_DRIVE", "IS_SATISFIED", "IS_FIRST_VISIT", "MK_CAMPAIGN_TYPE_L1", "MK_CAMPAIGN_TYPE_NAME", "ACTIVE_TYPE");
					}
				}, "fm", true);
	}


	$("#fm").html5Validate(function() {
		if(!visitAndLeaveTimeCheck('VISIT_TIME', 'LEAVE_TIME', document.getElementById('LEAVE_TIME'))) {return;}
		if(document.getElementById('IS_TEST_DRIVE').value=='10041001') {
			if(document.getElementById('IS_TEST').value!='10041001' && document.getElementById('IS_DRIVE').value!='10041001') {
				MuiAlert("是否试乘和是否试驾至少一个选择为'是'");
				return;
			}
		}
		MuiConfirm("确定提交吗?”,function(e){
	    		if(e.index == 0 ){
	    			var url = httpUrlHead + "HallReceptionService/updateHallReception.json?" + httpUrlEnd;
			makeFormCall(url, _submitCallBack, 'fm');
	    		}
   	 	});
	});

	function _submitCallBack(json) {
		if (json.RESULT.funcStatus == '1') {
			if(json.soldName == undefined) {
				MuiAlert("提交成功！",toGoBack());
				
			} else {
				MuiAlert("提交成功，此客户已由销售顾问"+json.soldName+"在跟进",toGoBack());
			}
		} else if (json.RESULT.funcStatus == '2') {
			MuiAlert("提交失败，请联系系统管理员！");
		}
	}

	function toGoBack() {
		window.location.href = "hallReceptionManage.html";
	}

	function setDate() {
		var d = new Date();
		document.getElementById('startDate').value = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate();
		document.getElementById('startDatediv').innerHTML = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate();
		document.getElementById('startMinute').valueAsDate = new Date(d.getFullYear(), d.getMonth(), d.getDate(), (d.getHours() + 8) % 24, d.getMinutes());
	}

	function visitTypeChange(val) {
		if (val == "13021002") {
			document.getElementById('LEAVE_TIME_LI').style.display = "";
			document.getElementById('IS_TEST_DRIVE_LI').style.display = "";
			document.getElementById('LEAVE_TIME').required=true;
			document.getElementById('IS_TEST_DRIVE').required=true;
			document.getElementById('IS_TEST_DRIVE').selectedIndex=0;
		} else {
			document.getElementById('LEAVE_TIME_LI').style.display = "none";
			document.getElementById('IS_TEST_DRIVE_LI').style.display = "none";
			document.getElementById('LEAVE_TIME').required=false;
			document.getElementById('IS_TEST_DRIVE').required=false;
			document.getElementById('LEAVE_TIME').value="";
			document.getElementById('IS_TEST_DRIVE').selectedIndex=0;
		}
		isTestDriveChange(document.getElementById('IS_TEST_DRIVE').value);
		
		if (val == "13021002" || val == "13021004") {
			document.getElementById('VISITOR_LI').style.display = "";
			document.getElementById('VISITOR').required=true;
			$("#VISITOR").attr("min", "1");
		} else {
			document.getElementById('VISITOR_LI').style.display = "none";
			document.getElementById('VISITOR').required=false;
			$("#VISITOR").removeAttr("min");
			$("#VISITOR").val("");
		}
	}
	
	function knowWayChange(val) {
		if(val == '13041001') {
			 document.getElementById('MEDIA_DETAIL_LI').style.display = "";
			 document.getElementById('MEDIA_DETAIL').required=true;
		} else {
			document.getElementById('MEDIA_DETAIL_LI').style.display = "none";
			document.getElementById('MEDIA_DETAIL').required=false;
			document.getElementById('MEDIA_DETAIL').value="";
		}
		if(val == '13041003') {
			var tjr = document.getElementsByName("tjr");
			if (tjr != null && tjr.length > 0) {
				for (var i = 0; i < tjr.length; i++) {
					tjr[i].style.display = "";
				}
			}
			document.getElementById('REFEREE_NAME').required=true;
			document.getElementById('REFEREE_MOBILE').required=true;
		} else {
			var tjr = document.getElementsByName("tjr");
			if (tjr != null && tjr.length > 0) {
				for (var i = 0; i < tjr.length; i++) {
					tjr[i].style.display = "none";
				}
			}
			document.getElementById('REFEREE_NAME').required=false;
			document.getElementById('REFEREE_MOBILE').required=false;
			document.getElementById('REFEREE_NAME').value="";
			document.getElementById('REFEREE_MOBILE').value="";
		}
	}

	function initTestDriveChange(val) {
		if ($('#VISIT_TYPE').attr('defaultvalue') == '13021002' && val == "10041001") {
			var scsj = document.getElementsByName("scsj");
			if (scsj != null && scsj.length > 0) {
				for (var i = 0; i < scsj.length; i++) {
					scsj[i].style.display = "";
				}
			}
			document.getElementById('VIN').required=true;
		} else {
			var scsj = document.getElementsByName("scsj");
			if (scsj != null && scsj.length > 0) {
				for (var i = 0; i < scsj.length; i++) {
					scsj[i].style.display = "none";
				}
			}
			document.getElementById('VIN').required=false;
		}
	}
	
	function isTestDriveChange(val) {
		if ($('#VISIT_TYPE').val() == '13021002' && val == "10041001") {
			var scsj = document.getElementsByName("scsj");
			if (scsj != null && scsj.length > 0) {
				for (var i = 0; i < scsj.length; i++) {
					scsj[i].style.display = "";
				}
			}
		//	document.getElementById('CONTACTOR_MOBILE_MUST').style.display = "";
		//	document.getElementById('CONTACTOR_MOBILE').required=true;
			document.getElementById('VIN').required=true;
		} else {
			var scsj = document.getElementsByName("scsj");
			if (scsj != null && scsj.length > 0) {
				for (var i = 0; i < scsj.length; i++) {
					scsj[i].style.display = "none";
				}
			}
		//	document.getElementById('CONTACTOR_MOBILE_MUST').style.display = "none";
		//	document.getElementById('CONTACTOR_MOBILE').required=false;
			document.getElementById('VIN').required=false;
			document.getElementById('IDENTITY_NUMBER').required=false;
			document.getElementById('DRIVER_LICENSE').required=false;
			
			document.getElementById('IS_TEST').value = "";
			document.getElementById('IS_DRIVE').value = "";
			document.getElementById('VIN').value = "";
			document.getElementById('IDENTITY_NUMBER').value = "";
			document.getElementById('DRIVER_LICENSE').value = "";
			document.getElementById('IS_SATISFIED').value = "";
		//	document.getElementById('IS_FIRST_VISIT').value = "";
		}
	}
	
	function isTestChange(val) {
		if(val == '10041001') {
			 document.getElementById('IDENTITY_NUMBER').required=true;
			 document.getElementById('IDENTITY_NUMBER_MUST').style.display = "";
		} else {
			document.getElementById('IDENTITY_NUMBER').required=false;
			document.getElementById('IDENTITY_NUMBER_MUST').style.display = "none";
		}
	}
	
	function isDriveChange(val) {
		if(val == '10041001') {
			 document.getElementById('DRIVER_LICENSE').required=true;
			 document.getElementById('DRIVER_LICENSE_MUST').style.display = "";
		} else {
			document.getElementById('DRIVER_LICENSE').required=false;
			document.getElementById('DRIVER_LICENSE_MUST').style.display = "none";
		}
	}
	
	/* 根据投放渠道类型级联选择投放渠道名称 */
	function createChannelName(val) {
		var oChannelNameSelect = document.getElementById('MK_CAMPAIGN_TYPE_NAME');
		if(val == "") {
			oChannelNameSelect.length=0;
			oChannelNameSelect.add(new Option("-请选择-", ""));
		} else {
			var url = httpUrlHead + "HallReceptionService/codeAssociated.json?" + httpUrlEnd + "&parCodeId="+val;
			makeFormCall(url, _createChannelNameCallBack, 'fm', true);
		}
	}
	
	function _createChannelNameCallBack(json) {
		var oChannelNameSelect = document.getElementById('MK_CAMPAIGN_TYPE_NAME');
		oChannelNameSelect.length=0;
		oChannelNameSelect.add(new Option("-请选择-", ""));
		// 建立Option对象
		for(var i=0;i<json.codeList.length;i++) {
			var objOption = new Option(json.codeList[i].CODE_DESC, json.codeList[i].CHILD_ID);
			oChannelNameSelect.add(objOption);
		}
	}
	
	//表单验证
    function validateForm(){
    	if (!_validForm("QUOTED_AMOUNT", "初次报价必须大于0。", "^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$")) {return;}
    	if (!_validForm("VISITOR", "来访人数必须为正整数。", "^[0-9]*[1-9][0-9]*$")) {return;}
    	if(document.getElementById('IS_TEST').value=='10041001' && !_validForm("IDENTITY_NUMBER", "身份证号格式不正确。", "^([0-9]){7,18}(x|X)?$")) {return;}
    	if(!checkVisitTime('VISIT_TIME', 'LEAVE_TIME')) {return;}
    }
    
    function checkVisitTime(time1Id, time2Id) {
    	document.getElementById(time2Id).setCustomValidity("");
    	if(time1Id != undefined && time2Id != undefined && document.getElementById(time1Id).value != "" && document.getElementById(time2Id).value != "") {
    		var h1 = parseInt(document.getElementById(time1Id).value.substring(0, 2));
    		var m1 = parseInt(document.getElementById(time1Id).value.substring(3, 5));
    		var h2 = parseInt(document.getElementById(time2Id).value.substring(0, 2));
    		var m2 = parseInt(document.getElementById(time2Id).value.substring(3, 5));
    		if((h1 > h2) || (h1 == h2 && m1 >= m2)) {
    			document.getElementById(time2Id).setCustomValidity("离店时间必须大于来访时间。");
    			return false;
        	}
    	}
    	return true;
    }
    
    function visitAndLeaveTimeCheck(time1Id, time2Id, thisTimeObj) {
    	if(time1Id != undefined && time2Id != undefined && document.getElementById(time1Id).value != "" && document.getElementById(time2Id).value != "") {
    		var h1 = parseInt(document.getElementById(time1Id).value.substring(0, 2));
    		var m1 = parseInt(document.getElementById(time1Id).value.substring(3, 5));
    		var h2 = parseInt(document.getElementById(time2Id).value.substring(0, 2));
    		var m2 = parseInt(document.getElementById(time2Id).value.substring(3, 5));
    		if((h1 > h2) || (h1 == h2 && m1 >= m2)) {
    			MuiAlert("离店时间必须大于来访时间。");
    			thisTimeObj.value = "";
    			return false;
        	}
    	}
    	return true;
    }
    
    
 	// 显示线索中客户信息
	function showHallReceptionCustomer() {
		window.open("hallReceptionCustomer.html");
	}
 	
 	
	$(document).ready(function() {
		_loadData();
		initLoadData();
		
		$("#customerChooseBtn").click(
			function() {
				$('#_showContentDiv1').hide();
				$('#backBtn').hide();
				$('#_showContentDiv2').show();
				$('#_showContentDiv2').removeClass().addClass('fadeInRightBig animated infinite');
				setTimeout(removeClass2, 1000);
		});
		
		function removeClass2() {
			$('#_showContentDiv2').removeClass();
		}
		
		$("#refereeChooseBtn").click(
			function() {
				$('#_showContentDiv1').hide();
				$('#backBtn').hide();
				$('#_showContentDiv3').show();
				$('#_showContentDiv3').removeClass().addClass('fadeInRightBig animated infinite');
				setTimeout(removeClass3, 1000);
		});
		
		function removeClass3() {
			$('#_showContentDiv3').removeClass();
		}
		
		$("#activityChooseBtn").click(
			function() {
				$('#_showContentDiv1').hide();
				$('#backBtn').hide();
				$('#_showContentDiv4').show();
				$('#_showContentDiv4').removeClass().addClass('fadeInRightBig animated infinite');
				setTimeout(removeClass4, 1000);
		});
			
		function removeClass4() {
			$('#_showContentDiv4').removeClass();
		}
		
		$("#vinChooseBtn").click(
			function() {
				$('#_showContentDiv1').hide();
				$('#backBtn').hide();
				$('#_showContentDiv5').show();
				$('#_showContentDiv5').removeClass().addClass('fadeInRightBig animated infinite');
				setTimeout(removeClass5, 1000);

				document.getElementById("seriesQuery").setAttribute("defaultValue", document.getElementById("intentSeries").value);
				_loadSeries("seriesQuery");
				document.getElementById("modelQuery").setAttribute("defaultValue", document.getElementById("intentModel").value);
				document.getElementById("packageQuery").setAttribute("defaultValue", document.getElementById("intentPackage").value);
				document.getElementById("colorQuery").setAttribute("defaultValue", document.getElementById("color").value);
				_changeSMPCDynamic('modelQuery', 'packageQuery', 'colorQuery', document.getElementById("intentSeries").value, 1);
				_changeSMPCDynamic('modelQuery', 'packageQuery', 'colorQuery', document.getElementById("intentModel").value, 2);
				_changeSMPCDynamic('modelQuery', 'packageQuery', 'colorQuery', document.getElementById("intentPackage").value, 3);
			}
		);
		
		function removeClass5() {
			$('#_showContentDiv5').removeClass();
		}
	});
	
	
	function initLoadData(){
		var url = httpUrlHead+"HallReceptionService/showSalesConsultant.json?"+httpUrlEnd;
		makeFormCall(url, function(json) {
			if (json.salesConsultantList != null && json.salesConsultantList.length > 0) {
				var oSelect = document.getElementById("salesConsultant");
				for (var i = 0; i < json.salesConsultantList.length; i++) {
					oSelect.add(new Option(json.salesConsultantList[i].NAME, json.salesConsultantList[i].NAME));
				}
			}
		}, "fm", true);
	}

	/* 查询潜在客户信息 */
	$("#_showContentDiv2_form").html5Validate(function() {
		var url = httpUrlHead + "HallReceptionService/showHallReceptionCustomer.json?" + httpUrlEnd + "&namePhone=" + encodeURIComponent(encodeURIComponent(document.getElementById('namePhone').value)) + "&salesConsultant=" + encodeURIComponent(encodeURIComponent(document.getElementById('salesConsultant').value));
		makeFormCall(url, function(json) {
			var tableBody = document.getElementById("tableBody");
			tableBody.innerHTML = '';
			if (json.customerList != null && json.customerList.length > 0) {
				for (var i = 0; i < json.customerList.length; i++) {
					var newRow = tableBody.insertRow(i);
					newRow.title = '单击鼠标左键进行确认';
					newRow.onclick=function() {
					//	alert(this.rowIndex);
					//	alert(document.getElementById("uId"+(this.rowIndex-1)));
						getCustomerInfoById(document.getElementById("uId"+(this.rowIndex-1)).value, document.getElementById("uType"+(this.rowIndex-1)).value);
					};
					
					var newCell = newRow.insertCell(0);
					newCell.align = "center";
					newCell.innerHTML = "<input type='hidden' id='uId"+i+"' value='"+json.customerList[i].ID+"'/><input type='hidden' id='uType"+i+"' value='"+json.customerList[i].TYPE+"'/>"+json.customerList[i].CUSTOMER_NAME;

					newCell = newRow.insertCell(1);
					newCell.align = "center";
					newCell.innerHTML = json.customerList[i].CONTACTOR_MOBILE;

					newCell = newRow.insertCell(2);
					newCell.align = "center";
					newCell.innerHTML = json.customerList[i].INTENT_LEVEL_DESC;
					
					newCell = newRow.insertCell(3);
					newCell.align = "center";
					newCell.innerHTML = json.customerList[i].SALES_CONSULTANT;
				}
			}
		}, "fm", true);
	});
	
	function getCustomerInfoById(id, type) {
		var url = httpUrlHead + "HallReceptionService/getHallReceptionCustomer.json?ID=" + id + "&TYPE=" + type + "&" + httpUrlEnd;
		makeFormCall(url, function(json) {
			$('#_showContentDiv1').show();
			$('#backBtn').show();
			$('#_showContentDiv2').hide();
			$('#CUSTOMER_NAME').val(json.customerInfo.CUSTOMER_NAME);
			$('#GENDER').val(json.customerInfo.GENDER);
			$('#INTENT_LEVEL').val(json.customerInfo.INTENT_LEVEL);
		}, "fm", true);
	}
	
	/* 查询保有客户信息 */
	$("#_showContentDiv3_form").html5Validate(function() {
		var url = httpUrlHead + "HallReceptionService/showRetainCustomer.json?" + httpUrlEnd + "&retainNamePhone=" + encodeURIComponent(encodeURIComponent(document.getElementById('retainNamePhone').value));
		makeFormCall(url, function(json) {
			var tableBody = document.getElementById("retainCusTableBody");
			tableBody.innerHTML = '';
			if (json.customerList != null && json.customerList.length > 0) {
				for (var i = 0; i < json.customerList.length; i++) {
					var newRow = tableBody.insertRow(i);
					newRow.title = '单击鼠标左键进行确认';
					newRow.onclick=function() {
						$('#_showContentDiv1').show();
						$('#backBtn').show();
						$('#_showContentDiv3').hide();
						$('#REFEREE_NAME').val($('#uRefereeName'+(this.rowIndex-1)).val());
						$('#REFEREE_MOBILE').val($('#uRefereeMobile'+(this.rowIndex-1)).val());
					};
					
					var newCell = newRow.insertCell(0);
					newCell.align = "center";
					newCell.innerHTML = "<input type='hidden' id='uRefereeName"+i+"' value='"+json.customerList[i].CTM_NAME+"'/><input type='hidden' id='uRefereeMobile"+i+"' value='"+json.customerList[i].MAIN_PHONE+"'/>"+json.customerList[i].CTM_NAME;

					newCell = newRow.insertCell(1);
					newCell.align = "center";
					newCell.innerHTML = json.customerList[i].MAIN_PHONE;
				}
			}
		}, "fm", true);
	});
	
	
	/* 选择活动 */
	$("#_showContentDiv4_form").html5Validate(function() {
		if (!_validForm("ACTIVE_TYPE")) {return;}
		var ACTIVE_TYPE = document.getElementById('ACTIVE_TYPE').value;
		if(ACTIVE_TYPE=='13051001') {
			var tableHead = document.getElementById("activityTableHead");
			tableHead.innerHTML = "<tr class='biaoge'><th align='center' width='25%'>活动计划</th><th align='center' width='25%'>营销活动</th><th align='center' width='50%'>营销活动名称</th></tr>";
			
			var url = httpUrlHead + "HallReceptionService/showDealerActivity.json?" + httpUrlEnd + "&ACTIVE_TYPE="+ACTIVE_TYPE + "&activityCode="+encodeURIComponent(encodeURIComponent(document.getElementById('activityCode').value)) + "&activityName="+encodeURIComponent(encodeURIComponent(document.getElementById('activityName').value));
			makeFormCall(url, function(json) {
				var tableBody = document.getElementById("activityTableBody");
				tableBody.innerHTML = '';
				if (json.activityList != null && json.activityList.length > 0) {
					for (var i = 0; i < json.activityList.length; i++) {
						var newRow = tableBody.insertRow(i);
						newRow.title = '单击鼠标左键进行确认';
						newRow.onclick=function() {
							$('#_showContentDiv1').show();
							$('#backBtn').show();
							$('#_showContentDiv4').hide();
							$('#CAMPAIGN_CODE').val($('#uActivityCode'+(this.rowIndex-1)).val());
							$('#CAMPAIGN_NAME').val($('#uActivityName'+(this.rowIndex-1)).val());
							$('#CAMPAIGN_TYPE').val($('#uActivityType'+(this.rowIndex-1)).val());
							
							$('#MK_CAMPAIGN_TYPE_L1_LI').show();
							$('#MK_CAMPAIGN_TYPE_NAME_LI').show();
							$('#MK_CAMPAIGN_TYPE_L1').attr("required", true);
							$('#MK_CAMPAIGN_TYPE_NAME').attr("required", true);
						};
						
						var newCell = newRow.insertCell(0);
						newCell.align = "center";
						newCell.innerHTML = "<input type='hidden' id='uActivityCode"+i+"' value='"+json.activityList[i].ACTIVITY_NUM+"'/><input type='hidden' id='uActivityName"+i+"' value='"+json.activityList[i].ACTIVITY_NAME+"'/><input type='hidden' id='uActivityType"+i+"' value='"+13051001+"'/>"+json.activityList[i].PLAN_NUM;

						newCell = newRow.insertCell(1);
						newCell.align = "center";
						newCell.innerHTML = json.activityList[i].ACTIVITY_NUM;

						newCell = newRow.insertCell(2);
						newCell.align = "center";
						newCell.innerHTML = json.activityList[i].ACTIVITY_NAME;
					}
				}
			}, "fm", true);
		} else if(ACTIVE_TYPE=='13051002') {
			var tableHead = document.getElementById("activityTableHead");
			tableHead.innerHTML = "<tr class='biaoge'><th align='center' width='25%'>活动代码</th><th align='center' width='50%'>活动名称</th><th align='center' width='25%'>活动类型</th></tr>";
			
			var url = httpUrlHead + "HallReceptionService/showDealerActivity.json?" + httpUrlEnd + "&ACTIVE_TYPE="+ACTIVE_TYPE + "&activityCode="+encodeURIComponent(encodeURIComponent(document.getElementById('activityCode').value)) + "&activityName="+encodeURIComponent(encodeURIComponent(document.getElementById('activityName').value));
			makeFormCall(url, function(json) {
				var tableBody = document.getElementById("activityTableBody");
				tableBody.innerHTML = '';
				if (json.activityList != null && json.activityList.length > 0) {
					for (var i = 0; i < json.activityList.length; i++) {
						var newRow = tableBody.insertRow(i);
						newRow.title = '单击鼠标左键进行确认';
						newRow.onclick=function() {
							$('#_showContentDiv1').show();
							$('#backBtn').show();
							$('#_showContentDiv4').hide();
							$('#CAMPAIGN_CODE').val($('#uActivityCode'+(this.rowIndex-1)).val());
							$('#CAMPAIGN_NAME').val($('#uActivityName'+(this.rowIndex-1)).val());
							$('#CAMPAIGN_TYPE').val($('#uActivityType'+(this.rowIndex-1)).val());
							
							$('#MK_CAMPAIGN_TYPE_L1').val('');
							$('#MK_CAMPAIGN_TYPE_NAME').val('');
							$('#MK_CAMPAIGN_TYPE_L1').attr("required", false);
							$('#MK_CAMPAIGN_TYPE_NAME').attr("required", false);
							$('#MK_CAMPAIGN_TYPE_L1_LI').hide();
							$('#MK_CAMPAIGN_TYPE_NAME_LI').hide();
						};
						
						var newCell = newRow.insertCell(0);
						newCell.align = "center";
						newCell.innerHTML = "<input type='hidden' id='uActivityCode"+i+"' value='"+json.activityList[i].MAINTEN_NO+"'/><input type='hidden' id='uActivityName"+i+"' value='"+json.activityList[i].MAINTEN_NAME+"'/><input type='hidden' id='uActivityType"+i+"' value='"+13051002+"'/>"+json.activityList[i].MAINTEN_NO;

						newCell = newRow.insertCell(1);
						newCell.align = "center";
						newCell.innerHTML = json.activityList[i].MAINTEN_NAME;

						newCell = newRow.insertCell(2);
						newCell.align = "center";
						newCell.innerHTML = json.activityList[i].MAINTEN_TYPE_DESC;
					}
				}
			}, "fm", true);
		}
	});
	
	// 查询试乘试驾车辆
	function queryVinData() {
		if(document.getElementById('seriesQuery').value == '' && document.getElementById('modelQuery').value == '' && document.getElementById('packageQuery').value == '' && document.getElementById('colorQuery').value == '' && document.getElementById('vinQuery').value == '') {
			MuiAlert("请填写查询条件");
			return;
		}
		var url = httpUrlHead + "HallReceptionService/showDealerTestDriveCar.json?" + httpUrlEnd + "&seriesQuery="+encodeURIComponent(encodeURIComponent(document.getElementById('seriesQuery').value)) + "&modelQuery="+encodeURIComponent(encodeURIComponent(document.getElementById('modelQuery').value)) + "&packageQuery="+encodeURIComponent(encodeURIComponent(document.getElementById('packageQuery').value)) + "&colorQuery="+encodeURIComponent(encodeURIComponent(document.getElementById('colorQuery').value)) + "&vinQuery="+encodeURIComponent(encodeURIComponent(document.getElementById('vinQuery').value));
		makeFormCall(url, function(json) {
			var tableBody = document.getElementById("vinTableBody");
			tableBody.innerHTML = '';
			if (json.vinList != null && json.vinList.length > 0) {
				for (var i = 0; i < json.vinList.length; i++) {
					var newRow = tableBody.insertRow(i);
					newRow.title = '单击鼠标左键进行确认';
					newRow.onclick=function() {
						$('#_showContentDiv1').show();
						$('#backBtn').show();
						$('#_showContentDiv5').hide();
						$('#VIN').val($('#uVin'+(this.rowIndex-1)).val());
					};
					
					var newCell = newRow.insertCell(0);
					newCell.align = "center";
					newCell.innerHTML = json.vinList[i].MODELNAME;

					newCell = newRow.insertCell(1);
					newCell.align = "center";
					newCell.innerHTML = json.vinList[i].COLORNAME;

					newCell = newRow.insertCell(2);
					newCell.align = "center";
					newCell.innerHTML = "<input type='hidden' id='uVin"+i+"' value='"+json.vinList[i].VIN+"'/>"+json.vinList[i].VIN;
				}
			}
		}, "fm", true);
	}
	
	
	function backLastLevel() {
		$('#_showContentDiv1').show();
		$('#backBtn').show();
    	$('#_showContentDiv2').hide();
    	$('#_showContentDiv3').hide();
		$('#_showContentDiv4').hide();
		$('#_showContentDiv5').hide();
		$('#_showContentDiv1').removeClass().addClass('fadeInLeftBig animated infinite');
		setTimeout(removeAnimated, 1000);
	}
	
	function removeAnimated() {
		$('#_showContentDiv1').removeClass();
	}

	
</script>
</html>